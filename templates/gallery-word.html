<!-- gallery-word.html {{ prefix }} {{ noun }}-->
{% extends "layout.html" %}
{% block nav %}
{% endblock %}
{% block content %}

<div id="gallery">
	<p class="newword">{{ prefix }}{{ noun }}</p>
	<p>{{ prefixdef }}</p>
	<p>+</p>
	<p id="noun-def">loading...</p>
</div>

{% endblock %}

{% block script %}
<script>
$(".newword").css({color:"hsla("+getRandomInt(30,300, 200)+","+getRandomInt(60,90)+"%,"+getRandomInt(50, 80)+"%,1)"});

$.ajax({
	url: "https://en.wiktionary.org/w/api.php",
	dataType: 'jsonp', 
	data: { 
    	action: "query", 
    	prop: 'extracts', 
    	titles: "{{ noun }}",
    	format: "json"
	},
	success: function(data) {
		var html = "";
		for (var obj in data.query.pages) {
			if (data.query.pages[obj].extract) 
				html = data.query.pages[obj].extract;
			else 
				$('#noun-def').html("Not found.");
		}
		$('#noun-def').html(html);
	},
	error: function(error) {
		console.log(error);
		$('#noun-def').html("Not found.");

	}
});

setTimeout( function() { document.location.reload(true); }, 5000 );
</script>
{% endblock %}